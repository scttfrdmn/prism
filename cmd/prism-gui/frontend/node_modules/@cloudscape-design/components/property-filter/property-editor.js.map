{"version":3,"file":"property-editor.js","sourceRoot":"","sources":["../../../src/property-filter/property-editor.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport clsx from 'clsx';\n\nimport { useUniqueId } from '@cloudscape-design/component-toolkit/internal';\n\nimport InternalButton from '../button/internal';\nimport InternalCheckbox from '../checkbox/internal';\nimport { DropdownStatusProps } from '../internal/components/dropdown-status';\nimport { FormFieldContext } from '../internal/context/form-field-context';\nimport { NonCancelableEventHandler } from '../internal/events';\nimport EmbeddedMultiselect from '../multiselect/embedded';\nimport { filterOptions } from './filter-options';\nimport { I18nStringsInternal } from './i18n-utils';\nimport {\n  ComparisonOperator,\n  ExtendedOperatorForm,\n  InternalFilteringOption,\n  InternalFilteringProperty,\n  InternalToken,\n  LoadItemsDetail,\n} from './interfaces';\nimport { useLoadItems } from './use-load-items';\n\nimport styles from './styles.css.js';\nimport testUtilStyles from './test-classes/styles.css.js';\n\nexport function PropertyEditorContentCustom<TokenValue = any>({\n  property,\n  operator,\n  filter,\n  value,\n  onChange,\n  operatorForm,\n}: {\n  property: InternalFilteringProperty;\n  operator: ComparisonOperator;\n  filter: string;\n  value: null | TokenValue;\n  onChange: (value: null | TokenValue) => void;\n  operatorForm: ExtendedOperatorForm<TokenValue>;\n}) {\n  const labelId = useUniqueId();\n  return (\n    <div className={styles['property-editor']}>\n      <div className={styles['property-editor-header']} id={labelId}>\n        {property.groupValuesLabel}\n      </div>\n\n      <div className={styles['property-editor-form']}>\n        <FormFieldContext.Provider value={{ ariaLabelledby: labelId }}>\n          {operatorForm({ value, onChange, operator, filter })}\n        </FormFieldContext.Provider>\n      </div>\n    </div>\n  );\n}\n\nexport function PropertyEditorContentEnum({\n  property,\n  filter,\n  value: unknownValue,\n  onChange,\n  asyncProps,\n  filteringOptions,\n  onLoadItems,\n}: {\n  property: InternalFilteringProperty;\n  filter: string;\n  value: unknown;\n  onChange: (value: null | string[]) => void;\n  asyncProps: DropdownStatusProps;\n  filteringOptions: readonly InternalFilteringOption[];\n  onLoadItems?: NonCancelableEventHandler<LoadItemsDetail>;\n}) {\n  const valueOptions: readonly {\n    value: string;\n    label: string;\n    tags?: readonly string[];\n    filteringTags?: readonly string[];\n  }[] = filteringOptions\n    .filter(option => option.property?.propertyKey === property.propertyKey)\n    .map(({ label, value, tags, filteringTags }) => ({ label, value, tags, filteringTags }));\n  const valueHandlers = useLoadItems(onLoadItems, '', property.externalProperty);\n  const value = !unknownValue ? [] : Array.isArray(unknownValue) ? unknownValue : [unknownValue];\n  const selectedOptions = valueOptions.filter(option => value.includes(option.value));\n  const filteredOptions = filterOptions(valueOptions, filter);\n  return (\n    <div className={clsx(styles['property-editor'], styles['property-editor-enum'])}>\n      {filteredOptions.length === 0 && (\n        <div className={styles['property-editor-header-enum']}>\n          <InternalCheckbox checked={false} readOnly={true} />\n          {property.groupValuesLabel}\n        </div>\n      )}\n\n      <EmbeddedMultiselect\n        filteringType=\"manual\"\n        selectedOptions={selectedOptions}\n        onChange={e => onChange(e.detail.selectedOptions.map(o => o.value!))}\n        options={filteredOptions.length > 0 ? [{ options: filteredOptions, label: property.groupValuesLabel }] : []}\n        filteringText={filter}\n        ariaLabel={property.groupValuesLabel}\n        statusType=\"finished\"\n        noMatch={asyncProps.empty}\n        {...valueHandlers}\n        {...asyncProps}\n      />\n    </div>\n  );\n}\n\nexport function PropertyEditorFooter<TokenValue = any>({\n  property,\n  operator,\n  value,\n  onCancel,\n  onSubmit,\n  i18nStrings,\n}: {\n  property: InternalFilteringProperty;\n  operator: ComparisonOperator;\n  value: null | TokenValue;\n  onCancel: () => void;\n  onSubmit: (value: InternalToken) => void;\n  i18nStrings: I18nStringsInternal;\n}) {\n  const submitToken = () => onSubmit({ property, operator, value });\n  return (\n    <div className={styles['property-editor-actions']}>\n      <InternalButton\n        variant=\"link\"\n        className={clsx(styles['property-editor-cancel'], testUtilStyles['property-editor-cancel'])}\n        onClick={onCancel}\n      >\n        {i18nStrings.cancelActionText}\n      </InternalButton>\n      <InternalButton className={testUtilStyles['property-editor-submit']} onClick={submitToken}>\n        {i18nStrings.applyActionText}\n      </InternalButton>\n    </div>\n  );\n}\n"]}