{"version":3,"file":"use-runtime-drawer-context.js","sourceRoot":"","sources":["../../../../src/app-layout/runtime-drawer/use-runtime-drawer-context.tsx"],"names":[],"mappings":"AAAA,qEAAqE;AACrE,sCAAsC;AACtC,OAAO,EAAa,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAEvD,OAAO,EAAE,WAAW,EAAE,MAAM,0CAA0C,CAAC;AAEvE,OAAO,EAAE,oBAAoB,EAAE,MAAM,4BAA4B,CAAC;AAGlE,MAAM,CAAC,MAAM,uBAAuB,GAAG,CAAC,EAAE,OAAO,EAAuC,EAAE,EAAE;IAC1F,MAAM,CAAC,aAAa,EAAE,gBAAgB,CAAC,GAAG,QAAQ,CAAsB,IAAI,CAAC,CAAC;IAE9E,SAAS,CAAC,GAAG,EAAE;;QACb,oDAAoD;QACpD,iIAAiI;QACjI,IAAI,CAAC,CAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO,CAAA,EAAE;YACrB,OAAO;SACR;QACD,MAAM,oBAAoB,GAAG,WAAW,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,OAAO,EAAE,IAAI,CAAC,EAAE,WAAC,OAAA,CAAC,CAAC,CAAA,MAAA,IAAI,aAAJ,IAAI,uBAAJ,IAAI,CAAE,OAAO,0CAAE,wBAAwB,CAAA,CAAA,EAAA,CAAC,CAAC;QAC9G,MAAM,QAAQ,GAAG,MAAA,oBAAoB,aAApB,oBAAoB,uBAApB,oBAAoB,CAAE,OAAO,0CAAE,wBAAwB,CAAC;QAEzE,IAAI,CAAC,QAAQ,EAAE;YACb,OAAO;SACR;QAED,MAAM,OAAO,GAAG,oBAAoB,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC;QACjE,gBAAgB,CAAC,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,KAAK,QAAQ,CAAC,mCAAI,IAAI,CAAC,CAAC;QAE1E,OAAO,oBAAoB,CAAC,SAAS,CAAC,gBAAgB,CAAC,OAAO,CAAC,EAAE;;YAC/D,gBAAgB,CAAC,MAAA,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,IAAI,CAAC,MAAM,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,KAAK,QAAQ,CAAC,mCAAI,IAAI,CAAC,CAAC;QAC5E,CAAC,CAAC,CAAC;IACL,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;IAEd,OAAO,aAAa,CAAC;AACvB,CAAC,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { RefObject, useEffect, useState } from 'react';\n\nimport { findUpUntil } from '@cloudscape-design/component-toolkit/dom';\n\nimport { awsuiPluginsInternal } from '../../internal/plugins/api';\nimport { DrawerConfig } from '../../internal/plugins/controllers/drawers';\n\nexport const useRuntimeDrawerContext = ({ rootRef }: { rootRef: RefObject<HTMLElement> }) => {\n  const [drawerContext, setDrawerContext] = useState<DrawerConfig | null>(null);\n\n  useEffect(() => {\n    // Determine if the hook is inside a runtime drawer.\n    // Thereâ€™s no other reliable way to check this, since runtime drawers are separate applications rendered into specific DOM nodes.\n    if (!rootRef?.current) {\n      return;\n    }\n    const runtimeDrawerWrapper = findUpUntil(rootRef?.current, node => !!node?.dataset?.awsuiRuntimeDrawerRootId);\n    const drawerId = runtimeDrawerWrapper?.dataset?.awsuiRuntimeDrawerRootId;\n\n    if (!drawerId) {\n      return;\n    }\n\n    const drawers = awsuiPluginsInternal.appLayout.getDrawersState();\n    setDrawerContext(drawers?.find(drawer => drawer.id === drawerId) ?? null);\n\n    return awsuiPluginsInternal.appLayout.onDrawersUpdated(drawers => {\n      setDrawerContext(drawers?.find(drawer => drawer.id === drawerId) ?? null);\n    });\n  }, [rootRef]);\n\n  return drawerContext;\n};\n"]}