{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../../src/date-range-picker/calendar/utils.ts"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { addMonths, addYears, isSameMonth, isSameYear, startOfMonth, startOfYear } from 'date-fns';\n\nimport { parseDate } from '../../internal/utils/date-time';\nimport { DateRangePickerProps } from '../interfaces';\nimport { RangeCalendarI18nStrings } from './interfaces';\n\nexport function findDateToFocus(\n  selected: Date | null,\n  baseDate: Date,\n  isDateEnabled: DateRangePickerProps.IsDateEnabledFunction\n) {\n  if (selected && isDateEnabled(selected) && isSameMonth(selected, baseDate)) {\n    return selected;\n  }\n  const today = new Date();\n  if (isDateEnabled(today) && isSameMonth(today, baseDate)) {\n    return today;\n  }\n  if (isDateEnabled(baseDate)) {\n    return baseDate;\n  }\n  return null;\n}\n\nexport function findMonthToFocus(\n  selected: Date | null,\n  baseDate: Date,\n  isMonthEnabled: DateRangePickerProps.IsDateEnabledFunction\n) {\n  if (selected && isMonthEnabled(selected) && isSameYear(selected, baseDate)) {\n    return selected;\n  }\n\n  const today = new Date();\n  if (isMonthEnabled(today) && isSameYear(today, baseDate)) {\n    return today;\n  }\n  if (isMonthEnabled(baseDate)) {\n    return baseDate;\n  }\n  return null;\n}\n\nexport function findMonthToDisplay(value: DateRangePickerProps.PendingAbsoluteValue, isSingleGrid: boolean) {\n  if (value.start.date) {\n    const startDate = parseDate(value.start.date);\n    if (isSingleGrid) {\n      return startOfMonth(startDate);\n    }\n    return startOfMonth(addMonths(startDate, 1));\n  }\n  if (value.end.date) {\n    return startOfMonth(parseDate(value.end.date));\n  }\n  return startOfMonth(Date.now());\n}\n\nexport function findYearToDisplay(value: DateRangePickerProps.PendingAbsoluteValue, isSingleGrid: boolean) {\n  if (value.start.date) {\n    const startDate = parseDate(value.start.date);\n    if (isSingleGrid) {\n      return startOfYear(startDate);\n    }\n    return startOfYear(addYears(startDate, 1));\n  }\n  if (value.end.date) {\n    return startOfYear(parseDate(value.end.date));\n  }\n  return startOfYear(Date.now());\n}\n\nexport const generateI18NFallbackKey = (isMonthPicker: boolean, isDateOnly: boolean) => {\n  if (isMonthPicker) {\n    return 'i18nStrings.monthConstraintText';\n  }\n  if (isDateOnly) {\n    return 'i18nStrings.dateConstraintText';\n  }\n  return 'i18nStrings.dateTimeConstraintText';\n};\n\nexport const generateI18NKey = (isMonthPicker: boolean, isDateOnly: boolean, isIso: boolean) => {\n  if (isMonthPicker) {\n    return isIso ? 'i18nStrings.isoMonthConstraintText' : 'i18nStrings.slashedMonthConstraintText';\n  }\n  if (isDateOnly) {\n    return isIso ? 'i18nStrings.isoDateConstraintText' : 'i18nStrings.slashedDateConstraintText';\n  }\n  return isIso ? 'i18nStrings.isoDateTimeConstraintText' : 'i18nStrings.slashedDateTimeConstraintText';\n};\n\nexport const provideI18N = (\n  i18nStrings: RangeCalendarI18nStrings,\n  isMonthPicker: boolean,\n  isDateOnly: boolean,\n  isIso: boolean\n): undefined | string => {\n  let result;\n  if (isMonthPicker) {\n    result = isIso ? i18nStrings?.isoMonthConstraintText : i18nStrings?.slashedMonthConstraintText;\n    if (!result) {\n      result = i18nStrings?.monthConstraintText;\n    }\n  } else if (isDateOnly) {\n    result = isIso ? i18nStrings?.isoDateConstraintText : i18nStrings?.slashedDateConstraintText;\n    if (!result) {\n      result = i18nStrings?.dateConstraintText;\n    }\n  }\n  if (!result) {\n    result = isIso ? i18nStrings?.isoDateTimeConstraintText : i18nStrings?.slashedDateTimeConstraintText;\n    if (!result) {\n      result = i18nStrings?.dateTimeConstraintText;\n    }\n  }\n  return result;\n};\n"]}